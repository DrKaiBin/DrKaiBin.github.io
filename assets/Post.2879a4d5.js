import{M as H,a3 as C,d as P,L as N,a as W,p as q,A as g,l as D,m as R,n as z,Z as V,o as f,b as h,w as m,f as v,e as A,k as M,v as O,h as a,x as $,q as j,s as U,T as Y,a1 as Z,$ as G}from"./app.02340a07.js";import{a as I,_ as J}from"./Page.6241e490.js";import{_ as K}from"./Common.2f49117d.js";import{_ as Q}from"./Pager.642fae79.js";const _=({headers:k,activeLink:n})=>{const r=H();return C("ul",{class:{catalog:!0}},k.map(o=>C("li",{class:{active:n===o.slug,[`level-${o.level}`]:!0,[`toc-link-${o.slug}`]:!0},key:o.title,onClick:()=>{r.currentRoute.value.hash!==`#${o.slug}`&&r.push(`#${o.slug}`)}},o.title)))};_.displayName="Catalog";_.props={headers:{type:Object,required:!0},activeLink:{type:String,default:""}};const se=P({setup(k){const n=Z();N();const r=W(),o=H(),x=G(),S=x.resolve,E=x.pending,l=q(),b=g(()=>l.value?n.value.headers:[]),T=t=>t.children.length>0?[t].concat(...t.children.map(T)):t,c=g(()=>[].concat(...b.value.map(T))),e=D({headerHeight:0,screenWidth:0,catalogTop:0,activeLink:"",isFixed:!1}),i=40,w=80,u=()=>{for(let s=c.value.length-1;s>=0;s--){const B=c.value[s].slug,L=document.querySelector(`#${B}`);if((L?L.getBoundingClientRect().top:0)<=100){e.activeLink=B;break}}window.pageYOffset>e.headerHeight+i-w?(e.isFixed=!0,e.catalogTop=w):(e.isFixed=!1,e.catalogTop=e.headerHeight+i),e.screenWidth<=719&&(e.catalogTop=-15)},d=()=>{const t=document.querySelector(".post-header");e.headerHeight=t?t.offsetHeight:0,e.screenWidth=document.body.clientWidth,e.screenWidth<=719?e.catalogTop=-15:e.catalogTop=e.headerHeight+i};let y;R(()=>{window.addEventListener("scroll",u),d(),window.onresize=()=>(()=>{d(),u()})(),y=o.afterEach(()=>{d()})}),z(()=>{window.removeEventListener("scroll",u),y()});const{post:p}=V(),F=g(()=>{if(!p.value)return{};const t=p.value.next;t&&(t.text=r.value.postNext);const s=p.value.prev;return s&&(s.text=r.value.postPrev),{next:t,prev:s}});return(t,s)=>(f(),h(K,null,{page:m(()=>[v(Y,{name:"fade-slide-y",mode:"out-in",onBeforeEnter:a(S),onBeforeLeave:a(E)},{default:m(()=>[A("div",{class:$(["post-wrapper",{"show-catalog":a(l)}])},[M(v(I,{class:"post-header"},null,512),[[O,a(n).title]]),(f(),h(J,{key:a(n).path,class:"post-content"},{bottom:m(()=>[v(Q,{data:a(F)},null,8,["data"])]),_:1})),a(l)?(f(),h(a(_),{key:0,headers:a(c),"active-link":a(e).activeLink,class:$({fixed:a(e).isFixed}),style:j({top:`${a(e).catalogTop}px`})},null,8,["headers","active-link","class","style"])):U("",!0)],2)]),_:1},8,["onBeforeEnter","onBeforeLeave"])]),_:1}))}});export{se as default};
